{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 166,
  "lineage": "9a036837-ac6a-106c-879c-2862e783f662",
  "outputs": {},
  "resources": [
    {
      "module": "module.dr[0]",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "344837150589",
            "arn": "arn:aws:iam::344837150589:user/eugene",
            "id": "344837150589",
            "user_id": "AIDAVASPFK56Z2X5GJBBN"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "data",
      "type": "aws_region",
      "name": "dr",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Frankfurt)",
            "endpoint": "ec2.eu-central-1.amazonaws.com",
            "id": "eu-central-1",
            "name": "eu-central-1",
            "region": "eu-central-1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "data",
      "type": "aws_region",
      "name": "primary",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1",
            "region": "eu-west-1"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "data",
      "type": "aws_secretsmanager_secret",
      "name": "primary_db_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "created_date": "2025-07-09T15:00:05Z",
            "description": "Database credentials for dev environment",
            "id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "kms_key_id": "",
            "last_changed_date": "2025-07-09T15:06:12Z",
            "name": "dev-bmdb/database-credentials",
            "policy": "",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-database-credentials"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "data",
      "type": "aws_secretsmanager_secret_version",
      "name": "primary_db_secret_version",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "created_date": "2025-07-09T15:06:12Z",
            "id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43|AWSCURRENT",
            "region": "eu-west-1",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "secret_string": "{\"DATABASE_HOST\":\"dev-bmdb-instance.cjyyamwawb3g.eu-west-1.rds.amazonaws.com\",\"DATABASE_NAME\":\"bmdb\",\"DATABASE_PASSWORD\":\"lkAOU3mMeVmHaMowegm0INBxThwNaH6SuU0IcGbL\",\"DATABASE_USER\":\"admin\"}",
            "version_id": "terraform-20250709150611755500000007",
            "version_stage": "AWSCURRENT",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_binary"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "managed",
      "type": "aws_db_subnet_group",
      "name": "dr",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:rds:eu-central-1:344837150589:subgrp:dev-dr-bmdb-subnet-group",
            "description": "Managed by Terraform",
            "id": "dev-dr-bmdb-subnet-group",
            "name": "dev-dr-bmdb-subnet-group",
            "name_prefix": "",
            "region": "eu-central-1",
            "subnet_ids": [
              "subnet-037d11e103b37fc62",
              "subnet-0c4cfcf93dc943a04"
            ],
            "supported_network_types": [
              "IPV4"
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-subnet-group"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-subnet-group"
            },
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "dr_db_secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0",
            "description": "Database credentials for dev-dr-bmdb app (DR region replica)",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0",
            "kms_key_id": "",
            "name": "dev-dr-bmdb/database-credentials",
            "name_prefix": "",
            "policy": "",
            "recovery_window_in_days": 30,
            "region": "eu-central-1",
            "replica": [],
            "tags": {
              "Environment": "dev-dr",
              "IsReplica": "true",
              "Name": "dev-dr-bmdb-db-credentials",
              "SourceRegion": "eu-west-1"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "IsReplica": "true",
              "Name": "dev-dr-bmdb-db-credentials",
              "SourceRegion": "eu-west-1"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.data.aws_region.primary"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "dr_db_secret_version",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0",
            "has_secret_string_wo": null,
            "id": "arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0|terraform-20250711112258628700000002",
            "region": "eu-central-1",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0",
            "secret_string": "{\"DATABASE_HOST\":\"dev-bmdb-instance.cjyyamwawb3g.eu-west-1.rds.amazonaws.com\",\"DATABASE_NAME\":\"bmdb\",\"DATABASE_PASSWORD\":\"lkAOU3mMeVmHaMowegm0INBxThwNaH6SuU0IcGbL\",\"DATABASE_USER\":\"admin\"}",
            "secret_string_wo": null,
            "secret_string_wo_version": null,
            "version_id": "terraform-20250711112258628700000002",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_binary"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string_wo"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.primary",
            "module.dr.data.aws_secretsmanager_secret.primary_db_secret",
            "module.dr.data.aws_secretsmanager_secret_version.primary_db_secret_version",
            "module.secrets.aws_secretsmanager_secret.database_credentials"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0]",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "dr_rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:security-group/sg-064c26574bf001e7e",
            "description": "Security group for RDS instance in DR region",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-064c26574bf001e7e",
            "ingress": [
              {
                "cidr_blocks": [],
                "description": "",
                "from_port": 3306,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-049d8950d5d5a7203"
                ],
                "self": false,
                "to_port": 3306
              }
            ],
            "name": "dev-dr-bmdb-rds-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-central-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-rds-sg"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-rds-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_policy",
      "name": "ecs_cpu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alarm_arns": [
              "arn:aws:cloudwatch:eu-central-1:344837150589:alarm:TargetTracking-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service-AlarmHigh-288b3820-2230-4cd1-952f-81cce33beddc",
              "arn:aws:cloudwatch:eu-central-1:344837150589:alarm:TargetTracking-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service-AlarmLow-223687cf-be32-4788-95da-42f9ca317ed4"
            ],
            "arn": "arn:aws:autoscaling:eu-central-1:344837150589:scalingPolicy:7e726373-fd56-4b9c-98f5-e8838106fe92:resource/ecs/service/dev-dr-bmdb-cluster/dev-dr-bmdb-service:policyName/dev-dr-bmdb-cpu-scaling",
            "id": "dev-dr-bmdb-cpu-scaling",
            "name": "dev-dr-bmdb-cpu-scaling",
            "policy_type": "TargetTrackingScaling",
            "region": "eu-central-1",
            "resource_id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "step_scaling_policy_configuration": [],
            "target_tracking_scaling_policy_configuration": [
              {
                "customized_metric_specification": [],
                "disable_scale_in": false,
                "predefined_metric_specification": [
                  {
                    "predefined_metric_type": "ECSServiceAverageCPUUtilization",
                    "resource_label": ""
                  }
                ],
                "scale_in_cooldown": 300,
                "scale_out_cooldown": 60,
                "target_value": 70
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_appautoscaling_target.ecs_target",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_service.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_policy",
      "name": "ecs_memory",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alarm_arns": [
              "arn:aws:cloudwatch:eu-central-1:344837150589:alarm:TargetTracking-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service-AlarmHigh-d0e526d7-8058-4041-92b5-0bb7f2b259a4",
              "arn:aws:cloudwatch:eu-central-1:344837150589:alarm:TargetTracking-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service-AlarmLow-eef3899e-f0cd-4d98-80b0-cd49f32858a7"
            ],
            "arn": "arn:aws:autoscaling:eu-central-1:344837150589:scalingPolicy:7e726373-fd56-4b9c-98f5-e8838106fe92:resource/ecs/service/dev-dr-bmdb-cluster/dev-dr-bmdb-service:policyName/dev-dr-bmdb-memory-scaling",
            "id": "dev-dr-bmdb-memory-scaling",
            "name": "dev-dr-bmdb-memory-scaling",
            "policy_type": "TargetTrackingScaling",
            "region": "eu-central-1",
            "resource_id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "step_scaling_policy_configuration": [],
            "target_tracking_scaling_policy_configuration": [
              {
                "customized_metric_specification": [],
                "disable_scale_in": false,
                "predefined_metric_specification": [
                  {
                    "predefined_metric_type": "ECSServiceAverageMemoryUtilization",
                    "resource_label": ""
                  }
                ],
                "scale_in_cooldown": 300,
                "scale_out_cooldown": 60,
                "target_value": 70
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_appautoscaling_target.ecs_target",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_service.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_scheduled_action",
      "name": "scale_down",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:eu-central-1:344837150589:scheduledAction:7e726373-fd56-4b9c-98f5-e8838106fe92:resource/ecs/service/dev-dr-bmdb-cluster/dev-dr-bmdb-service:scheduledActionName/dev-dr-bmdb-scale-down",
            "end_time": null,
            "id": "dev-dr-bmdb-scale-down-ecs-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "name": "dev-dr-bmdb-scale-down",
            "region": "eu-central-1",
            "resource_id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "scalable_target_action": [
              {
                "max_capacity": "1",
                "min_capacity": "0"
              }
            ],
            "schedule": "cron(0 18 ? * MON,TUE,WED,THU,FRI *)",
            "service_namespace": "ecs",
            "start_time": null,
            "timezone": "UTC"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_appautoscaling_target.ecs_target",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_service.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_scheduled_action",
      "name": "scale_up",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:eu-central-1:344837150589:scheduledAction:7e726373-fd56-4b9c-98f5-e8838106fe92:resource/ecs/service/dev-dr-bmdb-cluster/dev-dr-bmdb-service:scheduledActionName/dev-dr-bmdb-scale-up",
            "end_time": null,
            "id": "dev-dr-bmdb-scale-up-ecs-service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "name": "dev-dr-bmdb-scale-up",
            "region": "eu-central-1",
            "resource_id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "scalable_target_action": [
              {
                "max_capacity": "2",
                "min_capacity": "1"
              }
            ],
            "schedule": "cron(0 08 ? * MON,TUE,WED,THU,FRI *)",
            "service_namespace": "ecs",
            "start_time": null,
            "timezone": "UTC"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_appautoscaling_target.ecs_target",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_service.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_target",
      "name": "ecs_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:application-autoscaling:eu-central-1:344837150589:scalable-target/0ec57e726373fd564b9c98f5e8838106fe92",
            "id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "max_capacity": 2,
            "min_capacity": 0,
            "region": "eu-central-1",
            "resource_id": "service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "role_arn": "arn:aws:iam::344837150589:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "suspended_state": [
              {
                "dynamic_scaling_in_suspended": false,
                "dynamic_scaling_out_suspended": false,
                "scheduled_scaling_suspended": false
              }
            ],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_service.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:eu-central-1:344837150589:log-group:/ecs/dev-dr-bmdb",
            "id": "/ecs/dev-dr-bmdb",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/ecs/dev-dr-bmdb",
            "name_prefix": "",
            "region": "eu-central-1",
            "retention_in_days": 7,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-logs"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-logs"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:eu-central-1:344837150589:cluster/dev-dr-bmdb-cluster",
            "configuration": [],
            "id": "arn:aws:ecs:eu-central-1:344837150589:cluster/dev-dr-bmdb-cluster",
            "name": "dev-dr-bmdb-cluster",
            "region": "eu-central-1",
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-cluster"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-cluster"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "alarms": [],
            "arn": "arn:aws:ecs:eu-central-1:344837150589:service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "availability_zone_rebalancing": "DISABLED",
            "capacity_provider_strategy": [
              {
                "base": 0,
                "capacity_provider": "FARGATE_SPOT",
                "weight": 1
              }
            ],
            "cluster": "arn:aws:ecs:eu-central-1:344837150589:cluster/dev-dr-bmdb-cluster",
            "deployment_circuit_breaker": [
              {
                "enable": true,
                "rollback": true
              }
            ],
            "deployment_controller": [
              {
                "type": "ECS"
              }
            ],
            "deployment_maximum_percent": 200,
            "deployment_minimum_healthy_percent": 100,
            "desired_count": 0,
            "enable_ecs_managed_tags": false,
            "enable_execute_command": false,
            "force_delete": null,
            "force_new_deployment": null,
            "health_check_grace_period_seconds": 0,
            "iam_role": "/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS",
            "id": "arn:aws:ecs:eu-central-1:344837150589:service/dev-dr-bmdb-cluster/dev-dr-bmdb-service",
            "launch_type": "",
            "load_balancer": [
              {
                "container_name": "bmdb",
                "container_port": 80,
                "elb_name": "",
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:targetgroup/dev-dr-bmdb-tg/34b8a6f97708ed11"
              }
            ],
            "name": "dev-dr-bmdb-service",
            "network_configuration": [
              {
                "assign_public_ip": false,
                "security_groups": [
                  "sg-049d8950d5d5a7203"
                ],
                "subnets": [
                  "subnet-037d11e103b37fc62",
                  "subnet-0c4cfcf93dc943a04"
                ]
              }
            ],
            "ordered_placement_strategy": [],
            "placement_constraints": [],
            "platform_version": "1.4.0",
            "propagate_tags": "NONE",
            "region": "eu-central-1",
            "scheduling_strategy": "REPLICA",
            "service_connect_configuration": [],
            "service_registries": [],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-service"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-service"
            },
            "task_definition": "arn:aws:ecs:eu-central-1:344837150589:task-definition/dev-dr-bmdb:6",
            "timeouts": null,
            "triggers": {},
            "volume_configuration": [],
            "vpc_lattice_configurations": [],
            "wait_for_steady_state": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_ecs_cluster.main",
            "module.dr.module.ecs.aws_ecs_task_definition.app",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.dr.module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_listener.http",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.ecs.aws_security_group.ecs_tasks",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:eu-central-1:344837150589:task-definition/dev-dr-bmdb:6",
            "arn_without_revision": "arn:aws:ecs:eu-central-1:344837150589:task-definition/dev-dr-bmdb",
            "container_definitions": "[{\"environment\":[],\"essential\":true,\"image\":\"344837150589.dkr.ecr.eu-west-1.amazonaws.com/ecli-bmdb-app:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-region\":\"eu-central-1\",\"awslogs-stream-prefix\":\"ecs\",\"awslogs-group\":\"/ecs/dev-dr-bmdb\"}},\"mountPoints\":[],\"name\":\"bmdb\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"secrets\":[{\"name\":\"DATABASE_HOST\",\"valueFrom\":\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0:DATABASE_HOST::\"},{\"name\":\"DATABASE_NAME\",\"valueFrom\":\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0:DATABASE_NAME::\"},{\"name\":\"DATABASE_PASSWORD\",\"valueFrom\":\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0:DATABASE_PASSWORD::\"},{\"name\":\"DATABASE_USER\",\"valueFrom\":\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0:DATABASE_USER::\"}],\"systemControls\":[],\"user\":\"root\",\"volumesFrom\":[]}]",
            "cpu": "256",
            "enable_fault_injection": false,
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::344837150589:role/dev-dr-bmdb-execution-role",
            "family": "dev-dr-bmdb",
            "id": "dev-dr-bmdb",
            "ipc_mode": "",
            "memory": "512",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "region": "eu-central-1",
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 6,
            "runtime_platform": [],
            "skip_destroy": false,
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-task"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-task"
            },
            "task_role_arn": "",
            "track_latest": false,
            "volume": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.dr",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_cloudwatch_log_group.main",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.dr.module.rds.aws_db_instance.main",
            "module.dr.module.rds.aws_db_subnet_group.main",
            "module.dr.module.rds.aws_security_group.rds",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "secrets_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
            "attachment_count": 1,
            "description": "Allow ECS tasks to access secrets and parameters",
            "id": "arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
            "name": "dev-dr-bmdb-task-secrets-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:dev-dr-bmdb/database-credentials-XwJyv0\"]},{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ssm:*:*:parameter/*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAVASPFK564VPAF2IM5",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.primary"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:role/dev-dr-bmdb-execution-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-07-10T12:08:52Z",
            "description": "",
            "force_detach_policies": false,
            "id": "dev-dr-bmdb-execution-role",
            "inline_policy": [
              {
                "name": "dr-ssm-access",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ssm:eu-central-1:344837150589:parameter/*\"]},{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:eu-central-1:344837150589:secret:*\"]}]}"
              },
              {
                "name": "ecs-execution-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:GetAuthorizationToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ecr:BatchCheckLayerAvailability\",\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ecr:eu-central-1::repository/*\",\"arn:aws:ecr:eu-west-1::repository/*\"]},{\"Action\":[\"logs:CreateLogStream\",\"logs:CreateLogGroup\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
              "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "dev-dr-bmdb-execution-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-execution-role"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-execution-role"
            },
            "unique_id": "AROAVASPFK56VPZMZQLB6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "name": "dev-dr-bmdb-execution-role"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_secrets_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "dev-dr-bmdb-execution-role/arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
            "role": "dev-dr-bmdb-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-dr-bmdb-task-secrets-policy",
            "role": "dev-dr-bmdb-execution-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.aws_secretsmanager_secret.dr_db_secret",
            "module.dr.data.aws_region.primary",
            "module.dr.module.ecs.aws_iam_policy.secrets_access",
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_task_execution_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "dev-dr-bmdb-execution-role/arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "dev-dr-bmdb-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "dev-dr-bmdb-execution-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.module.ecs.aws_iam_role.ecs_task_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_lb",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:loadbalancer/app/dev-dr-bmdb-alb/5b49ef80a46d522a",
            "arn_suffix": "app/dev-dr-bmdb-alb/5b49ef80a46d522a",
            "client_keep_alive": 3600,
            "connection_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "customer_owned_ipv4_pool": "",
            "desync_mitigation_mode": "defensive",
            "dns_name": "dev-dr-bmdb-alb-847909329.eu-central-1.elb.amazonaws.com",
            "dns_record_client_routing_policy": null,
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": true,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "enable_tls_version_and_cipher_suite_headers": false,
            "enable_waf_fail_open": false,
            "enable_xff_client_port": false,
            "enable_zonal_shift": false,
            "enforce_security_group_inbound_rules_on_private_link_traffic": "",
            "id": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:loadbalancer/app/dev-dr-bmdb-alb/5b49ef80a46d522a",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "ipam_pools": [],
            "load_balancer_type": "application",
            "minimum_load_balancer_capacity": [],
            "name": "dev-dr-bmdb-alb",
            "name_prefix": "",
            "preserve_host_header": false,
            "region": "eu-central-1",
            "security_groups": [
              "sg-0cfa67809b1d76a66"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-04ee56da4012d173b"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-09a8fcd97a7d6bada"
              }
            ],
            "subnets": [
              "subnet-04ee56da4012d173b",
              "subnet-09a8fcd97a7d6bada"
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-alb"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-alb"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6",
            "xff_header_processing_mode": "append",
            "zone_id": "Z215JYRZR1TBD5"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:loadbalancer/app/dev-dr-bmdb-alb/5b49ef80a46d522a"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:listener/app/dev-dr-bmdb-alb/5b49ef80a46d522a/beb0ac9c77bed20a",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:targetgroup/dev-dr-bmdb-tg/34b8a6f97708ed11",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:listener/app/dev-dr-bmdb-alb/5b49ef80a46d522a/beb0ac9c77bed20a",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:loadbalancer/app/dev-dr-bmdb-alb/5b49ef80a46d522a",
            "mutual_authentication": [],
            "port": 80,
            "protocol": "HTTP",
            "region": "eu-central-1",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {},
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.dr.module.ecs.aws_lb.main",
            "module.dr.module.ecs.aws_lb_target_group.app",
            "module.dr.module.ecs.aws_security_group.alb",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:targetgroup/dev-dr-bmdb-tg/34b8a6f97708ed11",
            "arn_suffix": "targetgroup/dev-dr-bmdb-tg/34b8a6f97708ed11",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 60,
                "matcher": "200",
                "path": "/",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 3,
                "unhealthy_threshold": 2
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-central-1:344837150589:targetgroup/dev-dr-bmdb-tg/34b8a6f97708ed11",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-central-1:344837150589:loadbalancer/app/dev-dr-bmdb-alb/5b49ef80a46d522a"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "dev-dr-bmdb-tg",
            "name_prefix": "",
            "port": 80,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "region": "eu-central-1",
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-tg"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-tg"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "ip",
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "alb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:security-group/sg-0cfa67809b1d76a66",
            "description": "Controls access to the ALB",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0cfa67809b1d76a66",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "dev-dr-bmdb-alb-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-central-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-alb-sg"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-alb-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ecs_tasks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:security-group/sg-049d8950d5d5a7203",
            "description": "Allow inbound traffic to ECS tasks",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-049d8950d5d5a7203",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "dev-dr-bmdb-ecs-tasks-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-central-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-ecs-tasks-sg"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-bmdb-ecs-tasks-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_eip",
      "name": "nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-08100364524d3f907",
            "arn": "arn:aws:ec2:eu-central-1:344837150589:elastic-ip/eipalloc-08100364524d3f907",
            "associate_with_private_ip": null,
            "association_id": "eipassoc-0a5d3e277b02f1573",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-08100364524d3f907",
            "instance": "",
            "ipam_pool_id": null,
            "network_border_group": "eu-central-1",
            "network_interface": "eni-06e11bb3fd4b199f4",
            "private_dns": "ip-10-1-3-92.eu-central-1.compute.internal",
            "private_ip": "10.1.3.92",
            "ptr_record": "",
            "public_dns": "ec2-3-77-231-221.eu-central-1.compute.amazonaws.com",
            "public_ip": "3.77.231.221",
            "public_ipv4_pool": "amazon",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-nat-eip"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-nat-eip"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:internet-gateway/igw-05e698a9a9a638091",
            "id": "igw-05e698a9a9a638091",
            "owner_id": "344837150589",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-igw"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-igw"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-08100364524d3f907",
            "association_id": "eipassoc-0a5d3e277b02f1573",
            "connectivity_type": "public",
            "id": "nat-0d46fd6ea7ae196f8",
            "network_interface_id": "eni-06e11bb3fd4b199f4",
            "private_ip": "10.1.3.92",
            "public_ip": "3.77.231.221",
            "region": "eu-central-1",
            "secondary_allocation_ids": [],
            "secondary_private_ip_address_count": 0,
            "secondary_private_ip_addresses": [],
            "subnet_id": "subnet-09a8fcd97a7d6bada",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-nat-gateway"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-nat-gateway"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.dr.module.vpc.aws_eip.nat",
            "module.dr.module.vpc.aws_internet_gateway.main",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route",
      "name": "private_nat_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "carrier_gateway_id": "",
            "core_network_arn": "",
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "",
            "id": "r-rtb-00dbc7975f972e6b61080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "nat-0d46fd6ea7ae196f8",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "region": "eu-central-1",
            "route_table_id": "rtb-00dbc7975f972e6b6",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": "",
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_eip.nat",
            "module.dr.module.vpc.aws_internet_gateway.main",
            "module.dr.module.vpc.aws_nat_gateway.main",
            "module.dr.module.vpc.aws_route_table.private",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route",
      "name": "public_internet_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "carrier_gateway_id": "",
            "core_network_arn": "",
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "igw-05e698a9a9a638091",
            "id": "r-rtb-0f349434557c6b3411080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "region": "eu-central-1",
            "route_table_id": "rtb-0f349434557c6b341",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": "",
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_internet_gateway.main",
            "module.dr.module.vpc.aws_route_table.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:route-table/rtb-00dbc7975f972e6b6",
            "id": "rtb-00dbc7975f972e6b6",
            "owner_id": "344837150589",
            "propagating_vgws": [],
            "region": "eu-central-1",
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-0d46fd6ea7ae196f8",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-route-table"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-route-table"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:route-table/rtb-0f349434557c6b341",
            "id": "rtb-0f349434557c6b341",
            "owner_id": "344837150589",
            "propagating_vgws": [],
            "region": "eu-central-1",
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-05e698a9a9a638091",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-route-table"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-route-table"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0db72456adf2dcd59",
            "region": "eu-central-1",
            "route_table_id": "rtb-00dbc7975f972e6b6",
            "subnet_id": "subnet-0c4cfcf93dc943a04",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_route_table.private",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0623a94cd5cd4b667",
            "region": "eu-central-1",
            "route_table_id": "rtb-00dbc7975f972e6b6",
            "subnet_id": "subnet-037d11e103b37fc62",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_route_table.private",
            "module.dr.module.vpc.aws_subnet.private",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-06239396b0bb1ed8c",
            "region": "eu-central-1",
            "route_table_id": "rtb-0f349434557c6b341",
            "subnet_id": "subnet-09a8fcd97a7d6bada",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_route_table.public",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0f80d19570e0a272f",
            "region": "eu-central-1",
            "route_table_id": "rtb-0f349434557c6b341",
            "subnet_id": "subnet-04ee56da4012d173b",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr.module.vpc.aws_route_table.public",
            "module.dr.module.vpc.aws_subnet.public",
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:subnet/subnet-0c4cfcf93dc943a04",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-central-1a",
            "availability_zone_id": "euc1-az2",
            "cidr_block": "10.1.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0c4cfcf93dc943a04",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-subnet-1"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-subnet-1"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:subnet/subnet-037d11e103b37fc62",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-central-1b",
            "availability_zone_id": "euc1-az3",
            "cidr_block": "10.1.2.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-037d11e103b37fc62",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-subnet-2"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-private-subnet-2"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:subnet/subnet-09a8fcd97a7d6bada",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-central-1a",
            "availability_zone_id": "euc1-az2",
            "cidr_block": "10.1.3.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-09a8fcd97a7d6bada",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-subnet-1"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-subnet-1"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:subnet/subnet-04ee56da4012d173b",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-central-1b",
            "availability_zone_id": "euc1-az3",
            "cidr_block": "10.1.4.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-04ee56da4012d173b",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-subnet-2"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-public-subnet-2"
            },
            "timeouts": null,
            "vpc_id": "vpc-090fe661bb4ace6b6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.dr.module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.dr[0].module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].dr",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:344837150589:vpc/vpc-090fe661bb4ace6b6",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.1.0.0/16",
            "default_network_acl_id": "acl-07964506a6a1c9c11",
            "default_route_table_id": "rtb-058df79d10b4bfe81",
            "default_security_group_id": "sg-0fb030aaa0b760c7f",
            "dhcp_options_id": "dopt-08f5f81d64f05e9dc",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-090fe661bb4ace6b6",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-058df79d10b4bfe81",
            "owner_id": "344837150589",
            "region": "eu-central-1",
            "tags": {
              "Environment": "dev-dr",
              "Name": "dev-dr-vpc"
            },
            "tags_all": {
              "Environment": "dev-dr",
              "Name": "dev-dr-vpc"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "data",
      "type": "archive_file",
      "name": "lambda_package",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "3ac7ee5991ede2166c21fec72a3d1c774282ce58",
            "output_base64sha256": "A6RmMglxwuvLEGCx/gyYlTJSKMghfWb+Zq2+fUSBy4I=",
            "output_base64sha512": "dVTilN39ygzY5H7jmlJ9gOuoE1IYs43NJBzSXliQcs+ENUjfr10iXMciufjyhmywIjpMfjHRb2kbEsGv6wJfdA==",
            "output_file_mode": null,
            "output_md5": "919fd157743230ee8bc411363d2ce086",
            "output_path": "modules/dr-automation/files/lambda_package.zip",
            "output_sha": "3ac7ee5991ede2166c21fec72a3d1c774282ce58",
            "output_sha256": "03a466320971c2ebcb1060b1fe0c9895325228c8217d66fe66adbe7d4481cb82",
            "output_sha512": "7554e294ddfdca0cd8e47ee39a527d80eba8135218b38dcd241cd25e589072cf843548dfaf5d225cc722b9f8f2866cb0223a4c7e31d16f691b12c1afeb025f74",
            "output_size": 1686,
            "source": [
              {
                "content": "import boto3\nimport json\nimport os\nimport logging\nfrom datetime import datetime\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\n\n# Environment variables\nSOURCE_REGION = os.environ.get('SOURCE_REGION', 'eu-west-1')\nDR_REGION = os.environ.get('DR_REGION', 'eu-central-1')\nENVIRONMENT = os.environ.get('ENVIRONMENT', 'dev')\nAPP_NAME = os.environ.get('APP_NAME', 'bmdb')\n\n# Derived values\nCLUSTER_NAME = f\"{ENVIRONMENT}-{APP_NAME}-cluster\"\nSERVICE_NAME = f\"{ENVIRONMENT}-{APP_NAME}-service\"\nDR_CLUSTER_NAME = f\"{ENVIRONMENT}-dr-{APP_NAME}-cluster\"\nDR_SERVICE_NAME = f\"{ENVIRONMENT}-dr-{APP_NAME}-service\"\n\ndef handler(event, context):\n    \"\"\"\n    Lambda handler to synchronize ECS task definitions between regions\n    \"\"\"\n    logger.info(f\"Starting task definition sync from {SOURCE_REGION} to {DR_REGION}\")\n    logger.info(f\"Environment: {ENVIRONMENT}, App: {APP_NAME}\")\n    \n    try:\n        # Get ECS clients for both regions\n        source_ecs = boto3.client('ecs', region_name=SOURCE_REGION)\n        dr_ecs = boto3.client('ecs', region_name=DR_REGION)\n        \n        # Step 1: Get current task definition from source region\n        logger.info(f\"Getting current task definition from {CLUSTER_NAME}/{SERVICE_NAME}\")\n        service_response = source_ecs.describe_services(\n            cluster=CLUSTER_NAME,\n            services=[SERVICE_NAME]\n        )\n        \n        if not service_response['services']:\n            logger.error(f\"Service {SERVICE_NAME} not found in cluster {CLUSTER_NAME}\")\n            return {\n                'statusCode': 404,\n                'body': f\"Service {SERVICE_NAME} not found\"\n            }\n        \n        task_def_arn = service_response['services'][0]['taskDefinition']\n        logger.info(f\"Found task definition: {task_def_arn}\")\n        \n        # Step 2: Get task definition details\n        task_def = source_ecs.describe_task_definition(\n            taskDefinition=task_def_arn\n        )['taskDefinition']\n        \n        # Step 3: Clean task definition by removing read-only fields\n        clean_task_def = {\n            'family': task_def['family'],\n            'containerDefinitions': task_def['containerDefinitions'],\n            'executionRoleArn': task_def.get('executionRoleArn', ''),\n            'taskRoleArn': task_def.get('taskRoleArn', ''),\n            'networkMode': task_def.get('networkMode', ''),\n            'volumes': task_def.get('volumes', []),\n            'placementConstraints': task_def.get('placementConstraints', []),\n            'requiresCompatibilities': task_def.get('requiresCompatibilities', [])\n        }\n        \n        # Add optional attributes only if they exist in the original task definition\n        if 'cpu' in task_def:\n            clean_task_def['cpu'] = task_def['cpu']\n        if 'memory' in task_def:\n            clean_task_def['memory'] = task_def['memory']\n        \n        # Step 4: Register task definition in DR region\n        logger.info(f\"Registering task definition in {DR_REGION}\")\n        dr_task_def_response = dr_ecs.register_task_definition(**clean_task_def)\n        \n        new_task_def_arn = dr_task_def_response['taskDefinition']['taskDefinitionArn']\n        logger.info(f\"Successfully registered task definition in DR region: {new_task_def_arn}\")\n        \n        # Step 5: Check if DR service exists and update it\n        try:\n            dr_cluster_exists = False\n            dr_service_exists = False\n            \n            # Check if DR cluster exists\n            clusters = dr_ecs.list_clusters()\n            for cluster_arn in clusters['clusterArns']:\n                if DR_CLUSTER_NAME in cluster_arn:\n                    dr_cluster_exists = True\n                    break\n            \n            if not dr_cluster_exists:\n                logger.info(f\"Creating DR cluster: {DR_CLUSTER_NAME}\")\n                dr_ecs.create_cluster(clusterName=DR_CLUSTER_NAME)\n                logger.info(f\"Created DR cluster: {DR_CLUSTER_NAME}\")\n            \n            # Check if DR service exists\n            services = dr_ecs.list_services(cluster=DR_CLUSTER_NAME)\n            for service_arn in services.get('serviceArns', []):\n                if DR_SERVICE_NAME in service_arn:\n                    dr_service_exists = True\n                    break\n            \n            if dr_service_exists:\n                logger.info(f\"Updating DR service with new task definition\")\n                dr_ecs.update_service(\n                    cluster=DR_CLUSTER_NAME,\n                    service=DR_SERVICE_NAME,\n                    taskDefinition=new_task_def_arn\n                )\n                logger.info(f\"Updated DR service with task definition: {new_task_def_arn}\")\n            else:\n                logger.info(f\"DR service doesn't exist yet. Task definition is registered and ready.\")\n                \n        except Exception as e:\n            logger.warning(f\"Could not update DR service: {str(e)}\")\n            logger.info(\"Task definition has been registered but service not updated\")\n        \n        return {\n            'statusCode': 200,\n            'body': json.dumps({\n                'message': 'Task definition sync completed successfully',\n                'sourceTaskDefinition': task_def_arn,\n                'drTaskDefinition': new_task_def_arn,\n                'timestamp': datetime.now().isoformat()\n            })\n        }\n        \n    except Exception as e:\n        logger.error(f\"Error syncing task definitions: {str(e)}\")\n        return {\n            'statusCode': 500,\n            'body': json.dumps({\n                'message': f\"Error syncing task definitions: {str(e)}\",\n                'timestamp': datetime.now().isoformat()\n            })\n        }\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "task_def_sync_schedule",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:eu-west-1:344837150589:rule/dev-task-def-sync-schedule",
            "description": "Triggers task definition sync Lambda on schedule",
            "event_bus_name": "default",
            "event_pattern": null,
            "force_destroy": false,
            "id": "dev-task-def-sync-schedule",
            "is_enabled": true,
            "name": "dev-task-def-sync-schedule",
            "name_prefix": "",
            "region": "eu-west-1",
            "role_arn": "",
            "schedule_expression": "cron(0 0 ? * MON *)",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "lambda_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:lambda:eu-west-1:344837150589:function:dev-task-def-sync",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "dev-task-def-sync-schedule-LambdaFunction",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "region": "eu-west-1",
            "retry_policy": [],
            "role_arn": "",
            "rule": "dev-task-def-sync-schedule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "LambdaFunction"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.dr_automation.aws_cloudwatch_event_rule.task_def_sync_schedule",
            "module.dr_automation.aws_iam_role.lambda_execution_role",
            "module.dr_automation.aws_lambda_function.task_def_sync",
            "module.dr_automation.data.archive_file.lambda_package",
            "module.dr_automation.local_file.ensure_dir",
            "module.dr_automation.local_file.lambda_code"
          ]
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_permissions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:policy/dev-task-def-sync-policy",
            "attachment_count": 1,
            "description": "IAM policy for task definition sync Lambda function",
            "id": "arn:aws:iam::344837150589:policy/dev-task-def-sync-policy",
            "name": "dev-task-def-sync-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"ecs:DescribeServices\",\"ecs:DescribeTaskDefinition\",\"ecs:RegisterTaskDefinition\",\"ecs:UpdateService\",\"ecs:ListServices\",\"ecs:ListClusters\",\"ecs:CreateCluster\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAVASPFK56UHN6CLGCB",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:role/dev-task-def-sync-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-07-11T11:22:57Z",
            "description": "",
            "force_detach_policies": false,
            "id": "dev-task-def-sync-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::344837150589:policy/dev-task-def-sync-policy"
            ],
            "max_session_duration": 3600,
            "name": "dev-task-def-sync-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROAVASPFK567Z5DUMJMT"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "name": "dev-task-def-sync-role"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_permissions_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "dev-task-def-sync-role/arn:aws:iam::344837150589:policy/dev-task-def-sync-policy",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-task-def-sync-policy",
            "role": "dev-task-def-sync-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-task-def-sync-policy",
            "role": "dev-task-def-sync-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr_automation.aws_iam_policy.lambda_permissions",
            "module.dr_automation.aws_iam_role.lambda_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "task_def_sync",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:eu-west-1:344837150589:function:dev-task-def-sync",
            "code_sha256": "A6RmMglxwuvLEGCx/gyYlTJSKMghfWb+Zq2+fUSBy4I=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "Automatically synchronizes ECS task definitions between primary and DR regions",
            "environment": [
              {
                "variables": {
                  "APP_NAME": "bmdb",
                  "DR_REGION": "eu-central-1",
                  "ENVIRONMENT": "dev",
                  "SOURCE_REGION": "eu-west-1"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "modules/dr-automation/files/lambda_package.zip",
            "function_name": "dev-task-def-sync",
            "handler": "index.handler",
            "id": "dev-task-def-sync",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:344837150589:function:dev-task-def-sync/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-07-11T11:23:07.027+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/dev-task-def-sync",
                "system_log_level": ""
              }
            ],
            "memory_size": 256,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-1:344837150589:function:dev-task-def-sync:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:eu-west-1:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-1:344837150589:function:dev-task-def-sync:$LATEST/invocations",
            "region": "eu-west-1",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::344837150589:role/dev-task-def-sync-role",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 1686,
            "tags": {
              "Environment": "dev",
              "Name": "dev-task-def-sync"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-task-def-sync"
            },
            "timeout": 300,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.dr_automation.aws_iam_role.lambda_execution_role",
            "module.dr_automation.data.archive_file.lambda_package",
            "module.dr_automation.local_file.ensure_dir",
            "module.dr_automation.local_file.lambda_code"
          ]
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_eventbridge",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "dev-task-def-sync",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromEventBridge",
            "principal": "events.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "region": "eu-west-1",
            "source_account": null,
            "source_arn": "arn:aws:events:eu-west-1:344837150589:rule/dev-task-def-sync-schedule",
            "statement_id": "AllowExecutionFromEventBridge",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.dr_automation.aws_cloudwatch_event_rule.task_def_sync_schedule",
            "module.dr_automation.aws_iam_role.lambda_execution_role",
            "module.dr_automation.aws_lambda_function.task_def_sync",
            "module.dr_automation.data.archive_file.lambda_package",
            "module.dr_automation.local_file.ensure_dir",
            "module.dr_automation.local_file.lambda_code"
          ]
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "ensure_dir",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "",
            "content_base64": null,
            "content_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
            "content_base64sha512": "z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg==",
            "content_md5": "d41d8cd98f00b204e9800998ecf8427e",
            "content_sha1": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "content_sha256": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
            "content_sha512": "cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/dr-automation/files/.gitkeep",
            "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "module": "module.dr_automation[0]",
      "mode": "managed",
      "type": "local_file",
      "name": "lambda_code",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "import boto3\nimport json\nimport os\nimport logging\nfrom datetime import datetime\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\n\n# Environment variables\nSOURCE_REGION = os.environ.get('SOURCE_REGION', 'eu-west-1')\nDR_REGION = os.environ.get('DR_REGION', 'eu-central-1')\nENVIRONMENT = os.environ.get('ENVIRONMENT', 'dev')\nAPP_NAME = os.environ.get('APP_NAME', 'bmdb')\n\n# Derived values\nCLUSTER_NAME = f\"{ENVIRONMENT}-{APP_NAME}-cluster\"\nSERVICE_NAME = f\"{ENVIRONMENT}-{APP_NAME}-service\"\nDR_CLUSTER_NAME = f\"{ENVIRONMENT}-dr-{APP_NAME}-cluster\"\nDR_SERVICE_NAME = f\"{ENVIRONMENT}-dr-{APP_NAME}-service\"\n\ndef handler(event, context):\n    \"\"\"\n    Lambda handler to synchronize ECS task definitions between regions\n    \"\"\"\n    logger.info(f\"Starting task definition sync from {SOURCE_REGION} to {DR_REGION}\")\n    logger.info(f\"Environment: {ENVIRONMENT}, App: {APP_NAME}\")\n    \n    try:\n        # Get ECS clients for both regions\n        source_ecs = boto3.client('ecs', region_name=SOURCE_REGION)\n        dr_ecs = boto3.client('ecs', region_name=DR_REGION)\n        \n        # Step 1: Get current task definition from source region\n        logger.info(f\"Getting current task definition from {CLUSTER_NAME}/{SERVICE_NAME}\")\n        service_response = source_ecs.describe_services(\n            cluster=CLUSTER_NAME,\n            services=[SERVICE_NAME]\n        )\n        \n        if not service_response['services']:\n            logger.error(f\"Service {SERVICE_NAME} not found in cluster {CLUSTER_NAME}\")\n            return {\n                'statusCode': 404,\n                'body': f\"Service {SERVICE_NAME} not found\"\n            }\n        \n        task_def_arn = service_response['services'][0]['taskDefinition']\n        logger.info(f\"Found task definition: {task_def_arn}\")\n        \n        # Step 2: Get task definition details\n        task_def = source_ecs.describe_task_definition(\n            taskDefinition=task_def_arn\n        )['taskDefinition']\n        \n        # Step 3: Clean task definition by removing read-only fields\n        clean_task_def = {\n            'family': task_def['family'],\n            'containerDefinitions': task_def['containerDefinitions'],\n            'executionRoleArn': task_def.get('executionRoleArn', ''),\n            'taskRoleArn': task_def.get('taskRoleArn', ''),\n            'networkMode': task_def.get('networkMode', ''),\n            'volumes': task_def.get('volumes', []),\n            'placementConstraints': task_def.get('placementConstraints', []),\n            'requiresCompatibilities': task_def.get('requiresCompatibilities', [])\n        }\n        \n        # Add optional attributes only if they exist in the original task definition\n        if 'cpu' in task_def:\n            clean_task_def['cpu'] = task_def['cpu']\n        if 'memory' in task_def:\n            clean_task_def['memory'] = task_def['memory']\n        \n        # Step 4: Register task definition in DR region\n        logger.info(f\"Registering task definition in {DR_REGION}\")\n        dr_task_def_response = dr_ecs.register_task_definition(**clean_task_def)\n        \n        new_task_def_arn = dr_task_def_response['taskDefinition']['taskDefinitionArn']\n        logger.info(f\"Successfully registered task definition in DR region: {new_task_def_arn}\")\n        \n        # Step 5: Check if DR service exists and update it\n        try:\n            dr_cluster_exists = False\n            dr_service_exists = False\n            \n            # Check if DR cluster exists\n            clusters = dr_ecs.list_clusters()\n            for cluster_arn in clusters['clusterArns']:\n                if DR_CLUSTER_NAME in cluster_arn:\n                    dr_cluster_exists = True\n                    break\n            \n            if not dr_cluster_exists:\n                logger.info(f\"Creating DR cluster: {DR_CLUSTER_NAME}\")\n                dr_ecs.create_cluster(clusterName=DR_CLUSTER_NAME)\n                logger.info(f\"Created DR cluster: {DR_CLUSTER_NAME}\")\n            \n            # Check if DR service exists\n            services = dr_ecs.list_services(cluster=DR_CLUSTER_NAME)\n            for service_arn in services.get('serviceArns', []):\n                if DR_SERVICE_NAME in service_arn:\n                    dr_service_exists = True\n                    break\n            \n            if dr_service_exists:\n                logger.info(f\"Updating DR service with new task definition\")\n                dr_ecs.update_service(\n                    cluster=DR_CLUSTER_NAME,\n                    service=DR_SERVICE_NAME,\n                    taskDefinition=new_task_def_arn\n                )\n                logger.info(f\"Updated DR service with task definition: {new_task_def_arn}\")\n            else:\n                logger.info(f\"DR service doesn't exist yet. Task definition is registered and ready.\")\n                \n        except Exception as e:\n            logger.warning(f\"Could not update DR service: {str(e)}\")\n            logger.info(\"Task definition has been registered but service not updated\")\n        \n        return {\n            'statusCode': 200,\n            'body': json.dumps({\n                'message': 'Task definition sync completed successfully',\n                'sourceTaskDefinition': task_def_arn,\n                'drTaskDefinition': new_task_def_arn,\n                'timestamp': datetime.now().isoformat()\n            })\n        }\n        \n    except Exception as e:\n        logger.error(f\"Error syncing task definitions: {str(e)}\")\n        return {\n            'statusCode': 500,\n            'body': json.dumps({\n                'message': f\"Error syncing task definitions: {str(e)}\",\n                'timestamp': datetime.now().isoformat()\n            })\n        }\n",
            "content_base64": null,
            "content_base64sha256": "Ifawih+r6iXIfcVvvC6paF9ULmZMlm7LfqJnDNdrctk=",
            "content_base64sha512": "ZrjbCNqgMRvwDhrkho4N80UHcVSTw6j01PfU3L3HCtwqD3V+bDBIPxxCNLq5Ww2TB3Ph40yygOC/8MTErjNKdw==",
            "content_md5": "d6149cefbd8b6fce7466843d2e8fa4a1",
            "content_sha1": "49cadda979db8ffc85c180cf6f7a9dc32e44ef68",
            "content_sha256": "21f6b08a1fabea25c87dc56fbc2ea9685f542e664c966ecb7ea2670cd76b72d9",
            "content_sha512": "66b8db08daa0311bf00e1ae4868e0df34507715493c3a8f4d4f7d4dcbdc70adc2a0f757e6c30483f1c4234bab95b0d930773e1e34cb280e0bff0c4c4ae334a77",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "modules/dr-automation/files/index.py",
            "id": "49cadda979db8ffc85c180cf6f7a9dc32e44ef68",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "identity_schema_version": 0,
          "dependencies": [
            "module.dr_automation.local_file.ensure_dir"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_policy",
      "name": "ecs_cpu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alarm_arns": [
              "arn:aws:cloudwatch:eu-west-1:344837150589:alarm:TargetTracking-service/dev-bmdb-cluster/dev-bmdb-service-AlarmHigh-1b795a01-fff7-46c6-bacb-72581f2e5465",
              "arn:aws:cloudwatch:eu-west-1:344837150589:alarm:TargetTracking-service/dev-bmdb-cluster/dev-bmdb-service-AlarmLow-31f30ef6-0461-4280-8914-41847d0f932e"
            ],
            "arn": "arn:aws:autoscaling:eu-west-1:344837150589:scalingPolicy:2a0d93ec-3f49-4b78-b226-dfb01cf64bf7:resource/ecs/service/dev-bmdb-cluster/dev-bmdb-service:policyName/dev-bmdb-cpu-scaling",
            "id": "dev-bmdb-cpu-scaling",
            "name": "dev-bmdb-cpu-scaling",
            "policy_type": "TargetTrackingScaling",
            "region": "eu-west-1",
            "resource_id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "step_scaling_policy_configuration": [],
            "target_tracking_scaling_policy_configuration": [
              {
                "customized_metric_specification": [],
                "disable_scale_in": false,
                "predefined_metric_specification": [
                  {
                    "predefined_metric_type": "ECSServiceAverageCPUUtilization",
                    "resource_label": ""
                  }
                ],
                "scale_in_cooldown": 300,
                "scale_out_cooldown": 60,
                "target_value": 70
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_appautoscaling_target.ecs_target",
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_service.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_policy",
      "name": "ecs_memory",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alarm_arns": [
              "arn:aws:cloudwatch:eu-west-1:344837150589:alarm:TargetTracking-service/dev-bmdb-cluster/dev-bmdb-service-AlarmHigh-349d6f74-d75c-4199-afa1-6fead0d7169d",
              "arn:aws:cloudwatch:eu-west-1:344837150589:alarm:TargetTracking-service/dev-bmdb-cluster/dev-bmdb-service-AlarmLow-8f7aa629-a360-49e9-bb6c-45c1bbe183d6"
            ],
            "arn": "arn:aws:autoscaling:eu-west-1:344837150589:scalingPolicy:2a0d93ec-3f49-4b78-b226-dfb01cf64bf7:resource/ecs/service/dev-bmdb-cluster/dev-bmdb-service:policyName/dev-bmdb-memory-scaling",
            "id": "dev-bmdb-memory-scaling",
            "name": "dev-bmdb-memory-scaling",
            "policy_type": "TargetTrackingScaling",
            "region": "eu-west-1",
            "resource_id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "step_scaling_policy_configuration": [],
            "target_tracking_scaling_policy_configuration": [
              {
                "customized_metric_specification": [],
                "disable_scale_in": false,
                "predefined_metric_specification": [
                  {
                    "predefined_metric_type": "ECSServiceAverageMemoryUtilization",
                    "resource_label": ""
                  }
                ],
                "scale_in_cooldown": 300,
                "scale_out_cooldown": 60,
                "target_value": 70
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_appautoscaling_target.ecs_target",
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_service.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_scheduled_action",
      "name": "scale_down",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:eu-west-1:344837150589:scheduledAction:2a0d93ec-3f49-4b78-b226-dfb01cf64bf7:resource/ecs/service/dev-bmdb-cluster/dev-bmdb-service:scheduledActionName/dev-bmdb-scale-down",
            "end_time": null,
            "id": "dev-bmdb-scale-down-ecs-service/dev-bmdb-cluster/dev-bmdb-service",
            "name": "dev-bmdb-scale-down",
            "region": "eu-west-1",
            "resource_id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "scalable_target_action": [
              {
                "max_capacity": "1",
                "min_capacity": "0"
              }
            ],
            "schedule": "cron(0 18 ? * MON,TUE,WED,THU,FRI *)",
            "service_namespace": "ecs",
            "start_time": null,
            "timezone": "UTC"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_appautoscaling_target.ecs_target",
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_service.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_scheduled_action",
      "name": "scale_up",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:eu-west-1:344837150589:scheduledAction:2a0d93ec-3f49-4b78-b226-dfb01cf64bf7:resource/ecs/service/dev-bmdb-cluster/dev-bmdb-service:scheduledActionName/dev-bmdb-scale-up",
            "end_time": null,
            "id": "dev-bmdb-scale-up-ecs-service/dev-bmdb-cluster/dev-bmdb-service",
            "name": "dev-bmdb-scale-up",
            "region": "eu-west-1",
            "resource_id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "scalable_dimension": "ecs:service:DesiredCount",
            "scalable_target_action": [
              {
                "max_capacity": "2",
                "min_capacity": "1"
              }
            ],
            "schedule": "cron(0 08 ? * MON,TUE,WED,THU,FRI *)",
            "service_namespace": "ecs",
            "start_time": null,
            "timezone": "UTC"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_appautoscaling_target.ecs_target",
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_service.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_appautoscaling_target",
      "name": "ecs_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:application-autoscaling:eu-west-1:344837150589:scalable-target/0ec52a0d93ec3f494b78b226dfb01cf64bf7",
            "id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "max_capacity": 2,
            "min_capacity": 0,
            "region": "eu-west-1",
            "resource_id": "service/dev-bmdb-cluster/dev-bmdb-service",
            "role_arn": "arn:aws:iam::344837150589:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService",
            "scalable_dimension": "ecs:service:DesiredCount",
            "service_namespace": "ecs",
            "suspended_state": [
              {
                "dynamic_scaling_in_suspended": false,
                "dynamic_scaling_out_suspended": false,
                "scheduled_scaling_suspended": false
              }
            ],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_service.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:eu-west-1:344837150589:log-group:/ecs/dev-bmdb",
            "id": "/ecs/dev-bmdb",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/ecs/dev-bmdb",
            "name_prefix": "",
            "region": "eu-west-1",
            "retention_in_days": 7,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-logs"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-logs"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:eu-west-1:344837150589:cluster/dev-bmdb-cluster",
            "configuration": [],
            "id": "arn:aws:ecs:eu-west-1:344837150589:cluster/dev-bmdb-cluster",
            "name": "dev-bmdb-cluster",
            "region": "eu-west-1",
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-cluster"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-cluster"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "alarms": [],
            "arn": "arn:aws:ecs:eu-west-1:344837150589:service/dev-bmdb-cluster/dev-bmdb-service",
            "availability_zone_rebalancing": "DISABLED",
            "capacity_provider_strategy": [
              {
                "base": 0,
                "capacity_provider": "FARGATE_SPOT",
                "weight": 1
              }
            ],
            "cluster": "arn:aws:ecs:eu-west-1:344837150589:cluster/dev-bmdb-cluster",
            "deployment_circuit_breaker": [
              {
                "enable": true,
                "rollback": true
              }
            ],
            "deployment_controller": [
              {
                "type": "ECS"
              }
            ],
            "deployment_maximum_percent": 200,
            "deployment_minimum_healthy_percent": 100,
            "desired_count": 1,
            "enable_ecs_managed_tags": false,
            "enable_execute_command": false,
            "force_delete": null,
            "force_new_deployment": null,
            "health_check_grace_period_seconds": 0,
            "iam_role": "/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS",
            "id": "arn:aws:ecs:eu-west-1:344837150589:service/dev-bmdb-cluster/dev-bmdb-service",
            "launch_type": "",
            "load_balancer": [
              {
                "container_name": "bmdb",
                "container_port": 80,
                "elb_name": "",
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:targetgroup/dev-bmdb-tg/657babdaa972e15c"
              }
            ],
            "name": "dev-bmdb-service",
            "network_configuration": [
              {
                "assign_public_ip": false,
                "security_groups": [
                  "sg-0eda85bbba9b5c2fd"
                ],
                "subnets": [
                  "subnet-0239c15b9fbe9be83",
                  "subnet-0c64808563b983d44",
                  "subnet-0f7101e329271d203"
                ]
              }
            ],
            "ordered_placement_strategy": [],
            "placement_constraints": [],
            "platform_version": "1.4.0",
            "propagate_tags": "NONE",
            "region": "eu-west-1",
            "scheduling_strategy": "REPLICA",
            "service_connect_configuration": [],
            "service_registries": [],
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-service"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-service"
            },
            "task_definition": "arn:aws:ecs:eu-west-1:344837150589:task-definition/dev-bmdb:3",
            "timeouts": null,
            "triggers": {},
            "volume_configuration": [],
            "vpc_lattice_configurations": [],
            "wait_for_steady_state": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_ecs_cluster.main",
            "module.ecs.aws_ecs_task_definition.app",
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.ecs.aws_iam_role_policy_attachment.ecs_secrets_access",
            "module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy",
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_listener.http",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.ecs.aws_security_group.ecs_tasks",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:eu-west-1:344837150589:task-definition/dev-bmdb:3",
            "arn_without_revision": "arn:aws:ecs:eu-west-1:344837150589:task-definition/dev-bmdb",
            "container_definitions": "[{\"environment\":[],\"essential\":true,\"image\":\"344837150589.dkr.ecr.eu-west-1.amazonaws.com/ecli-bmdb-app:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/dev-bmdb\",\"awslogs-region\":\"eu-west-1\",\"awslogs-stream-prefix\":\"ecs\"}},\"mountPoints\":[],\"name\":\"bmdb\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"secrets\":[{\"name\":\"DATABASE_HOST\",\"valueFrom\":\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43:DATABASE_HOST::\"},{\"name\":\"DATABASE_NAME\",\"valueFrom\":\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43:DATABASE_NAME::\"},{\"name\":\"DATABASE_PASSWORD\",\"valueFrom\":\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43:DATABASE_PASSWORD::\"},{\"name\":\"DATABASE_USER\",\"valueFrom\":\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43:DATABASE_USER::\"}],\"systemControls\":[],\"user\":\"root\",\"volumesFrom\":[]}]",
            "cpu": "256",
            "enable_fault_injection": false,
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::344837150589:role/dev-bmdb-execution-role",
            "family": "dev-bmdb",
            "id": "dev-bmdb",
            "ipc_mode": "",
            "memory": "512",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "region": "eu-west-1",
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 3,
            "runtime_platform": [],
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-task"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-task"
            },
            "task_role_arn": "",
            "track_latest": false,
            "volume": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ecs.aws_cloudwatch_log_group.main",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "secrets_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
            "attachment_count": 1,
            "description": "Allow ECS tasks to access secrets and parameters",
            "id": "arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
            "name": "dev-bmdb-task-secrets-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43\"]},{\"Action\":[\"ssm:GetParameters\",\"ssm:GetParameter\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ssm:*:*:parameter/*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAVASPFK56TPD3Q4GJ7",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:role/dev-bmdb-execution-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-07-09T15:00:05Z",
            "description": "",
            "force_detach_policies": false,
            "id": "dev-bmdb-execution-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
              "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "dev-bmdb-execution-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-execution-role"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-execution-role"
            },
            "unique_id": "AROAVASPFK56Z2QOHJEZP"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "name": "dev-bmdb-execution-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_secrets_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "dev-bmdb-execution-role/arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
            "role": "dev-bmdb-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "policy_arn": "arn:aws:iam::344837150589:policy/dev-bmdb-task-secrets-policy",
            "role": "dev-bmdb-execution-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_policy.secrets_access",
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_task_execution_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "dev-bmdb-execution-role/arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "dev-bmdb-execution-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "account_id": "344837150589",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "dev-bmdb-execution-role"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.ecs.aws_iam_role.ecs_task_execution_role",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:loadbalancer/app/dev-bmdb-alb/55d1d669d2d057cd",
            "arn_suffix": "app/dev-bmdb-alb/55d1d669d2d057cd",
            "client_keep_alive": 3600,
            "connection_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "customer_owned_ipv4_pool": "",
            "desync_mitigation_mode": "defensive",
            "dns_name": "dev-bmdb-alb-892433537.eu-west-1.elb.amazonaws.com",
            "dns_record_client_routing_policy": null,
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": true,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "enable_tls_version_and_cipher_suite_headers": false,
            "enable_waf_fail_open": false,
            "enable_xff_client_port": false,
            "enable_zonal_shift": false,
            "enforce_security_group_inbound_rules_on_private_link_traffic": "",
            "id": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:loadbalancer/app/dev-bmdb-alb/55d1d669d2d057cd",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "ipam_pools": [],
            "load_balancer_type": "application",
            "minimum_load_balancer_capacity": [],
            "name": "dev-bmdb-alb",
            "name_prefix": "",
            "preserve_host_header": false,
            "region": "eu-west-1",
            "security_groups": [
              "sg-040fd7dbbfec31b21"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-01732956d6a27c95a"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-09147832b53383bc7"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-0d8f7ae568911a19e"
              }
            ],
            "subnets": [
              "subnet-01732956d6a27c95a",
              "subnet-09147832b53383bc7",
              "subnet-0d8f7ae568911a19e"
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-alb"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-alb"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae",
            "xff_header_processing_mode": "append",
            "zone_id": "Z32O12XQLNTSW2"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "identity": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:loadbalancer/app/dev-bmdb-alb/55d1d669d2d057cd"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.ecs.aws_security_group.alb",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:listener/app/dev-bmdb-alb/55d1d669d2d057cd/fdc05071718e1b6b",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:targetgroup/dev-bmdb-tg/657babdaa972e15c",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:listener/app/dev-bmdb-alb/55d1d669d2d057cd/fdc05071718e1b6b",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:loadbalancer/app/dev-bmdb-alb/55d1d669d2d057cd",
            "mutual_authentication": [],
            "port": 80,
            "protocol": "HTTP",
            "region": "eu-west-1",
            "routing_http_request_x_amzn_mtls_clientcert_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_issuer_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_leaf_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_subject_header_name": null,
            "routing_http_request_x_amzn_mtls_clientcert_validity_header_name": null,
            "routing_http_request_x_amzn_tls_cipher_suite_header_name": null,
            "routing_http_request_x_amzn_tls_version_header_name": null,
            "routing_http_response_access_control_allow_credentials_header_value": "",
            "routing_http_response_access_control_allow_headers_header_value": "",
            "routing_http_response_access_control_allow_methods_header_value": "",
            "routing_http_response_access_control_allow_origin_header_value": "",
            "routing_http_response_access_control_expose_headers_header_value": "",
            "routing_http_response_access_control_max_age_header_value": "",
            "routing_http_response_content_security_policy_header_value": "",
            "routing_http_response_server_enabled": true,
            "routing_http_response_strict_transport_security_header_value": "",
            "routing_http_response_x_content_type_options_header_value": "",
            "routing_http_response_x_frame_options_header_value": "",
            "ssl_policy": "",
            "tags": {},
            "tags_all": {},
            "tcp_idle_timeout_seconds": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.ecs.aws_lb.main",
            "module.ecs.aws_lb_target_group.app",
            "module.ecs.aws_security_group.alb",
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:targetgroup/dev-bmdb-tg/657babdaa972e15c",
            "arn_suffix": "targetgroup/dev-bmdb-tg/657babdaa972e15c",
            "connection_termination": null,
            "deregistration_delay": "30",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 2,
                "interval": 60,
                "matcher": "200",
                "path": "/",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 3,
                "unhealthy_threshold": 2
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-west-1:344837150589:targetgroup/dev-bmdb-tg/657babdaa972e15c",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [
              "arn:aws:elasticloadbalancing:eu-west-1:344837150589:loadbalancer/app/dev-bmdb-alb/55d1d669d2d057cd"
            ],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "dev-bmdb-tg",
            "name_prefix": "",
            "port": 80,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "region": "eu-west-1",
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-tg"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-tg"
            },
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_group_health": [
              {
                "dns_failover": [
                  {
                    "minimum_healthy_targets_count": "1",
                    "minimum_healthy_targets_percentage": "off"
                  }
                ],
                "unhealthy_state_routing": [
                  {
                    "minimum_healthy_targets_count": 1,
                    "minimum_healthy_targets_percentage": "off"
                  }
                ]
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null,
                "unhealthy_draining_interval": null
              }
            ],
            "target_type": "ip",
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "alb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:security-group/sg-040fd7dbbfec31b21",
            "description": "Controls access to the ALB",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-040fd7dbbfec31b21",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "dev-bmdb-alb-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-west-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-alb-sg"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-alb-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.ecs",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ecs_tasks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:security-group/sg-0eda85bbba9b5c2fd",
            "description": "Allow inbound traffic to ECS tasks",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0eda85bbba9b5c2fd",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "dev-bmdb-ecs-tasks-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-west-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-ecs-tasks-sg"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-ecs-tasks-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_secretsmanager_secret_version.update_db_host",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rds",
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "address": "dev-bmdb-instance.cjyyamwawb3g.eu-west-1.rds.amazonaws.com",
            "allocated_storage": 20,
            "allow_major_version_upgrade": null,
            "apply_immediately": false,
            "arn": "arn:aws:rds:eu-west-1:344837150589:db:dev-bmdb-instance",
            "auto_minor_version_upgrade": true,
            "availability_zone": "eu-west-1a",
            "backup_retention_period": 1,
            "backup_target": "region",
            "backup_window": "22:06-22:36",
            "blue_green_update": [],
            "ca_cert_identifier": "rds-ca-rsa2048-g1",
            "character_set_name": "",
            "copy_tags_to_snapshot": true,
            "custom_iam_instance_profile": "",
            "customer_owned_ip_enabled": false,
            "database_insights_mode": "standard",
            "db_name": "bmdb",
            "db_subnet_group_name": "dev-bmdb-subnet-group",
            "dedicated_log_volume": false,
            "delete_automated_backups": true,
            "deletion_protection": false,
            "domain": "",
            "domain_auth_secret_arn": "",
            "domain_dns_ips": [],
            "domain_fqdn": "",
            "domain_iam_role_name": "",
            "domain_ou": "",
            "enabled_cloudwatch_logs_exports": [],
            "endpoint": "dev-bmdb-instance.cjyyamwawb3g.eu-west-1.rds.amazonaws.com:3306",
            "engine": "mysql",
            "engine_lifecycle_support": "open-source-rds-extended-support",
            "engine_version": "8.0",
            "engine_version_actual": "8.0.41",
            "final_snapshot_identifier": null,
            "hosted_zone_id": "Z29XKXDKYMONMX",
            "iam_database_authentication_enabled": false,
            "id": "db-TCOYQG67ROO3ZFUV3UEFHNMKUU",
            "identifier": "dev-bmdb-instance",
            "identifier_prefix": "",
            "instance_class": "db.t3.micro",
            "iops": 0,
            "kms_key_id": "arn:aws:kms:eu-west-1:344837150589:key/b8952912-9d59-4da4-9163-9db3018b8fb3",
            "latest_restorable_time": "2025-07-11T13:40:00Z",
            "license_model": "general-public-license",
            "listener_endpoint": [],
            "maintenance_window": "sun:23:16-sun:23:46",
            "manage_master_user_password": null,
            "master_user_secret": [],
            "master_user_secret_kms_key_id": null,
            "max_allocated_storage": 0,
            "monitoring_interval": 0,
            "monitoring_role_arn": "",
            "multi_az": false,
            "nchar_character_set_name": "",
            "network_type": "IPV4",
            "option_group_name": "default:mysql-8-0",
            "parameter_group_name": "default.mysql8.0",
            "password": "lkAOU3mMeVmHaMowegm0INBxThwNaH6SuU0IcGbL",
            "password_wo": null,
            "password_wo_version": null,
            "performance_insights_enabled": false,
            "performance_insights_kms_key_id": "",
            "performance_insights_retention_period": 0,
            "port": 3306,
            "publicly_accessible": false,
            "region": "eu-west-1",
            "replica_mode": "",
            "replicas": [],
            "replicate_source_db": "",
            "resource_id": "db-TCOYQG67ROO3ZFUV3UEFHNMKUU",
            "restore_to_point_in_time": [],
            "s3_import": [],
            "skip_final_snapshot": true,
            "snapshot_identifier": null,
            "status": "available",
            "storage_encrypted": true,
            "storage_throughput": 0,
            "storage_type": "gp2",
            "tags": {
              "AutoStop": "true",
              "Environment": "dev",
              "Name": "dev-bmdb-instance"
            },
            "tags_all": {
              "AutoStop": "true",
              "Environment": "dev",
              "Name": "dev-bmdb-instance"
            },
            "timeouts": null,
            "timezone": "",
            "upgrade_storage_config": null,
            "username": "admin",
            "vpc_security_group_ids": [
              "sg-0541b3d1b4b827b69"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "password"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "password_wo"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "username"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NDgwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9",
          "dependencies": [
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_security_group.rds",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rds",
      "mode": "managed",
      "type": "aws_db_subnet_group",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:rds:eu-west-1:344837150589:subgrp:dev-bmdb-subnet-group",
            "description": "Managed by Terraform",
            "id": "dev-bmdb-subnet-group",
            "name": "dev-bmdb-subnet-group",
            "name_prefix": "",
            "region": "eu-west-1",
            "subnet_ids": [
              "subnet-0239c15b9fbe9be83",
              "subnet-0c64808563b983d44",
              "subnet-0f7101e329271d203"
            ],
            "supported_network_types": [
              "IPV4"
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-subnet-group"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-subnet-group"
            },
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rds",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "update_db_host",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "has_secret_string_wo": null,
            "id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43|terraform-20250709150611755500000007",
            "region": "eu-west-1",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "secret_string": "{\"DATABASE_HOST\":\"dev-bmdb-instance.cjyyamwawb3g.eu-west-1.rds.amazonaws.com\",\"DATABASE_NAME\":\"bmdb\",\"DATABASE_PASSWORD\":\"lkAOU3mMeVmHaMowegm0INBxThwNaH6SuU0IcGbL\",\"DATABASE_USER\":\"admin\"}",
            "secret_string_wo": null,
            "secret_string_wo_version": null,
            "version_id": "terraform-20250709150611755500000007",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_binary"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string_wo"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.rds.aws_db_instance.main",
            "module.rds.aws_db_subnet_group.main",
            "module.rds.aws_security_group.rds",
            "module.secrets.aws_secretsmanager_secret.database_credentials",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.rds",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:security-group/sg-0541b3d1b4b827b69",
            "description": "Allow database traffic from ECS tasks",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0541b3d1b4b827b69",
            "ingress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "MySQL from private subnets",
                "from_port": 3306,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 3306
              }
            ],
            "name": "dev-bmdb-rds-sg",
            "name_prefix": "",
            "owner_id": "344837150589",
            "region": "eu-west-1",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "dev",
              "Name": "dev-bmdb-rds-sg"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-bmdb-rds-sg"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.secrets",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "secrets_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::344837150589:policy/dev-bmdb-secrets-access-policy",
            "attachment_count": 0,
            "description": "Policy that allows access to the database secrets",
            "id": "arn:aws:iam::344837150589:policy/dev-bmdb-secrets-access-policy",
            "name": "dev-bmdb-secrets-access-policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAVASPFK564LQ4UJXU6",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets.aws_secretsmanager_secret.database_credentials"
          ]
        }
      ]
    },
    {
      "module": "module.secrets",
      "mode": "managed",
      "type": "aws_secretsmanager_secret",
      "name": "database_credentials",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "description": "Database credentials for dev environment",
            "force_overwrite_replica_secret": false,
            "id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "kms_key_id": "",
            "name": "dev-bmdb/database-credentials",
            "name_prefix": "",
            "policy": "",
            "recovery_window_in_days": 30,
            "region": "eu-west-1",
            "replica": [],
            "tags": {
              "Environment": "dev",
              "Name": "dev-database-credentials"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-database-credentials"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.secrets",
      "mode": "managed",
      "type": "aws_secretsmanager_secret_version",
      "name": "database_credentials",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "has_secret_string_wo": null,
            "id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43|terraform-20250709150006027400000002",
            "region": "eu-west-1",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:eu-west-1:344837150589:secret:dev-bmdb/database-credentials-og7u43",
            "secret_string": "{\"DATABASE_HOST\":\"db_host_to_be_updated\",\"DATABASE_NAME\":\"bmdb\",\"DATABASE_PASSWORD\":\"lkAOU3mMeVmHaMowegm0INBxThwNaH6SuU0IcGbL\",\"DATABASE_USER\":\"admin\"}",
            "secret_string_wo": null,
            "secret_string_wo_version": null,
            "version_id": "terraform-20250709150006027400000002",
            "version_stages": [
              "AWSPREVIOUS"
            ]
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_binary"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "secret_string_wo"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.secrets.aws_secretsmanager_secret.database_credentials"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_eip",
      "name": "nat",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address": null,
            "allocation_id": "eipalloc-0a71b2c33969ecbf6",
            "arn": "arn:aws:ec2:eu-west-1:344837150589:elastic-ip/eipalloc-0a71b2c33969ecbf6",
            "associate_with_private_ip": null,
            "association_id": "eipassoc-0cfb59e4486e8bb94",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-0a71b2c33969ecbf6",
            "instance": "",
            "ipam_pool_id": null,
            "network_border_group": "eu-west-1",
            "network_interface": "eni-0027fc41dd9d1497a",
            "private_dns": "ip-10-0-101-147.eu-west-1.compute.internal",
            "private_ip": "10.0.101.147",
            "ptr_record": "",
            "public_dns": "ec2-34-240-127-39.eu-west-1.compute.amazonaws.com",
            "public_ip": "34.240.127.39",
            "public_ipv4_pool": "amazon",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-nat-eip"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-nat-eip"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:internet-gateway/igw-0733d0c33a70fdb1e",
            "id": "igw-0733d0c33a70fdb1e",
            "owner_id": "344837150589",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-igw"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-igw"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-0a71b2c33969ecbf6",
            "association_id": "eipassoc-0cfb59e4486e8bb94",
            "connectivity_type": "public",
            "id": "nat-06b33249319cea89b",
            "network_interface_id": "eni-0027fc41dd9d1497a",
            "private_ip": "10.0.101.147",
            "public_ip": "34.240.127.39",
            "region": "eu-west-1",
            "secondary_allocation_ids": [],
            "secondary_private_ip_address_count": 0,
            "secondary_private_ip_addresses": [],
            "subnet_id": "subnet-0d8f7ae568911a19e",
            "tags": {
              "Environment": "dev",
              "Name": "dev-nat-gateway"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-nat-gateway"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route",
      "name": "private_nat_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "carrier_gateway_id": "",
            "core_network_arn": "",
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "",
            "id": "r-rtb-0cee17bd3b581d1831080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "nat-06b33249319cea89b",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "region": "eu-west-1",
            "route_table_id": "rtb-0cee17bd3b581d183",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": "",
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_eip.nat",
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_nat_gateway.main",
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route",
      "name": "public_internet_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "carrier_gateway_id": "",
            "core_network_arn": "",
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "igw-0733d0c33a70fdb1e",
            "id": "r-rtb-0ab60255156bc80751080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "region": "eu-west-1",
            "route_table_id": "rtb-0ab60255156bc8075",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": "",
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_internet_gateway.main",
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:route-table/rtb-0cee17bd3b581d183",
            "id": "rtb-0cee17bd3b581d183",
            "owner_id": "344837150589",
            "propagating_vgws": [],
            "region": "eu-west-1",
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "nat-06b33249319cea89b",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-private-route-table"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-private-route-table"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:route-table/rtb-0ab60255156bc8075",
            "id": "rtb-0ab60255156bc8075",
            "owner_id": "344837150589",
            "propagating_vgws": [],
            "region": "eu-west-1",
            "route": [
              {
                "carrier_gateway_id": "",
                "cidr_block": "0.0.0.0/0",
                "core_network_arn": "",
                "destination_prefix_list_id": "",
                "egress_only_gateway_id": "",
                "gateway_id": "igw-0733d0c33a70fdb1e",
                "ipv6_cidr_block": "",
                "local_gateway_id": "",
                "nat_gateway_id": "",
                "network_interface_id": "",
                "transit_gateway_id": "",
                "vpc_endpoint_id": "",
                "vpc_peering_connection_id": ""
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "dev-public-route-table"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-public-route-table"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0fce6ca4a8b879518",
            "region": "eu-west-1",
            "route_table_id": "rtb-0cee17bd3b581d183",
            "subnet_id": "subnet-0c64808563b983d44",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-067ea35f891de790e",
            "region": "eu-west-1",
            "route_table_id": "rtb-0cee17bd3b581d183",
            "subnet_id": "subnet-0239c15b9fbe9be83",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-00de1eca13c8e7c9f",
            "region": "eu-west-1",
            "route_table_id": "rtb-0cee17bd3b581d183",
            "subnet_id": "subnet-0f7101e329271d203",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.private",
            "module.vpc.aws_subnet.private",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-042c7357445bd9559",
            "region": "eu-west-1",
            "route_table_id": "rtb-0ab60255156bc8075",
            "subnet_id": "subnet-0d8f7ae568911a19e",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0d26fdf6115008b53",
            "region": "eu-west-1",
            "route_table_id": "rtb-0ab60255156bc8075",
            "subnet_id": "subnet-09147832b53383bc7",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "gateway_id": "",
            "id": "rtbassoc-0781002fb3821d858",
            "region": "eu-west-1",
            "route_table_id": "rtb-0ab60255156bc8075",
            "subnet_id": "subnet-01732956d6a27c95a",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjEyMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.vpc.aws_route_table.public",
            "module.vpc.aws_subnet.public",
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-0c64808563b983d44",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1a",
            "availability_zone_id": "euw1-az1",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0c64808563b983d44",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-private-subnet-1"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-private-subnet-1"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-0239c15b9fbe9be83",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1b",
            "availability_zone_id": "euw1-az2",
            "cidr_block": "10.0.2.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0239c15b9fbe9be83",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-private-subnet-2"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-private-subnet-2"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-0f7101e329271d203",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1c",
            "availability_zone_id": "euw1-az3",
            "cidr_block": "10.0.3.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0f7101e329271d203",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-private-subnet-3"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-private-subnet-3"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-0d8f7ae568911a19e",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1a",
            "availability_zone_id": "euw1-az1",
            "cidr_block": "10.0.101.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-0d8f7ae568911a19e",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-public-subnet-1"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-public-subnet-1"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-09147832b53383bc7",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1b",
            "availability_zone_id": "euw1-az2",
            "cidr_block": "10.0.102.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-09147832b53383bc7",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-public-subnet-2"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-public-subnet-2"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        },
        {
          "index_key": 2,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:subnet/subnet-01732956d6a27c95a",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "eu-west-1c",
            "availability_zone_id": "euw1-az3",
            "cidr_block": "10.0.103.0/24",
            "customer_owned_ipv4_pool": "",
            "enable_dns64": false,
            "enable_lni_at_device_index": 0,
            "enable_resource_name_dns_a_record_on_launch": false,
            "enable_resource_name_dns_aaaa_record_on_launch": false,
            "id": "subnet-01732956d6a27c95a",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "ipv6_native": false,
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": true,
            "outpost_arn": "",
            "owner_id": "344837150589",
            "private_dns_hostname_type_on_launch": "ip-name",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-public-subnet-3"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-public-subnet-3"
            },
            "timeouts": null,
            "vpc_id": "vpc-0de36293635ba91ae"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.main"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-1:344837150589:vpc/vpc-0de36293635ba91ae",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-098f5889137ab12a0",
            "default_route_table_id": "rtb-0a501da88b9f6303e",
            "default_security_group_id": "sg-07daaa39ae8b171d1",
            "dhcp_options_id": "dopt-0fd1ace7285feca48",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "id": "vpc-0de36293635ba91ae",
            "instance_tenancy": "default",
            "ipv4_ipam_pool_id": null,
            "ipv4_netmask_length": null,
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_network_border_group": "",
            "ipv6_ipam_pool_id": "",
            "ipv6_netmask_length": 0,
            "main_route_table_id": "rtb-0a501da88b9f6303e",
            "owner_id": "344837150589",
            "region": "eu-west-1",
            "tags": {
              "Environment": "dev",
              "Name": "dev-vpc"
            },
            "tags_all": {
              "Environment": "dev",
              "Name": "dev-vpc"
            }
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    }
  ],
  "check_results": null
}
